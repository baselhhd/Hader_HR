{
  "permissions": {
    "allow": [
      "Bash(git add src/pages/employee/Profile.tsx src/pages/employee/LeaveRequest.tsx src/pages/employee/AttendanceHistory.tsx src/pages/employee/CustomRequest.tsx)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: Ø¥ØµÙ„Ø§Ø­ ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù - Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Supabase Auth Ø¨Ù€ localStorage\n\n## ðŸ› Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:\nØ¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù (Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠØŒ Ø·Ù„Ø¨ Ø¥Ø¬Ø§Ø²Ø©ØŒ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±ØŒ Ø·Ù„Ø¨ Ø®Ø§Øµ)\nÙƒØ§Ù† ÙŠØ­Ø¯Ø« logout ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\n\n## ðŸ” Ø§Ù„Ø³Ø¨Ø¨:\nØ§Ù„ØµÙØ­Ø§Øª ÙƒØ§Ù†Øª ØªØ³ØªØ®Ø¯Ù… `supabase.auth.getUser()` Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\nÙ„ÙƒÙ† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ³ØªØ®Ø¯Ù… localStorage Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Ù„ÙŠØ³ Supabase Auth)\nÙ„Ø°Ù„Ùƒ `supabase.auth.getUser()` ÙŠÙØ±Ø¬Ø¹ null â†’ redirect Ø¥Ù„Ù‰ /login\n\n## âœ… Ø§Ù„Ø­Ù„:\nØ§Ø³ØªØ¨Ø¯Ø§Ù„ Supabase Auth Ø¨Ù€ `getSession()` Ù…Ù† `@/lib/auth` ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª:\n\n### 1ï¸âƒ£ Profile.tsx:\n- âœ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ `supabase.auth.getUser()` Ø¨Ù€ `getSession()`\n- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `session.userId` Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† `user.id`\n- âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† `session.role === ''employee''`\n\n### 2ï¸âƒ£ LeaveRequest.tsx:\n- âœ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ `supabase.auth.getSession()` Ø¨Ù€ `getSession()`\n- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `session.userId` Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† `session.user.id`\n- âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† role Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n\n### 3ï¸âƒ£ AttendanceHistory.tsx:\n- âœ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ `supabase.auth.getSession()` Ø¨Ù€ `getSession()`\n- âœ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ `supabase.auth.getUser()` ÙÙŠ `loadAttendance()`\n- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… `session.userId` ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª\n\n### 4ï¸âƒ£ CustomRequest.tsx:\n- âœ… ÙƒØ§Ù†Øª ØªØ³ØªØ®Ø¯Ù… `getSession()` Ù„ÙƒÙ† Ù…Ø¹ `session.id` (Ø®Ø·Ø£)\n- âœ… ØªØµØ­ÙŠØ­ Ø¥Ù„Ù‰ `session.userId` ÙÙŠ Ù…ÙƒØ§Ù†ÙŠÙ†:\n  - `fetchRequests()` - Ø§Ù„Ø³Ø·Ø± 47\n  - `handleSubmit()` - Ø§Ù„Ø³Ø·Ø± 78\n\n## ðŸ“ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©:\n\n### Ù‚Ø¨Ù„:\n```typescript\nconst { data: { user } } = await supabase.auth.getUser();\nif (!user) {\n  navigate(\"/login\");\n  return;\n}\n```\n\n### Ø¨Ø¹Ø¯:\n```typescript\nconst session = getSession();\nif (!session) {\n  navigate(\"/login\");\n  return;\n}\n\nif (session.role !== \"employee\") {\n  toast.error(\"ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„\");\n  navigate(\"/employee/dashboard\");\n  return;\n}\n```\n\n## ðŸŽ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©:\n- âœ… ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­\n- âœ… ØµÙØ­Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­\n- âœ… ØµÙØ­Ø© Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­\n- âœ… ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø®Ø§Øµ ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­\n- âœ… Ù„Ø§ ÙŠØ­Ø¯Ø« logout Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ ØµÙØ­Ø©\n- âœ… Ø§Ù„ØªÙˆØ§ÙÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… localStorage Auth\n\n## ðŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© (4):\n1. src/pages/employee/Profile.tsx\n2. src/pages/employee/LeaveRequest.tsx\n3. src/pages/employee/AttendanceHistory.tsx\n4. src/pages/employee/CustomRequest.tsx\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
